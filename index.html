<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>AIå…±æƒ…èƒ½åŠ›æå‡åŠ©æ‰‹</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f0f8ff;
      margin: 0;
      padding: 0;
    }
    /* å‰ç½®é¡µé¢æ ·å¼ */
    #pre-page {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      background-color: #f0f8ff;
    }
    #pre-page h1 {
      color: #2e8b57;
      font-size: 36px;
      margin-bottom: 20px;
    }
    #start-btn {
      background-color: #2e8b57;
      color: #ffffff;
      border: none;
      border-radius: 50px;
      padding: 15px 30px;
      font-size: 18px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    #start-btn:hover {
      background-color: #3cb371;
    }
    /* èŠå¤©ç•Œé¢æ ·å¼ */
    #chat-interface {
      display: none;
      height: 100vh;
      display: flex;
      flex-direction: column;
    }
    .header {
      background-color: #2e8b57;
      color: #ffffff;
      padding: 10px;
      text-align: center;
      flex-shrink: 0;
    }
    .content {
      display: flex;
      flex: 1;
      overflow: hidden;
    }
    .client-info {
      width: 30%;
      background-color: #ffffff;
      padding: 10px;
      overflow-y: auto;
      border-right: 1px solid #ccc;
    }
    .client-info h2 {
      color: #2e8b57;
      margin-top: 0;
    }
    .client-info p {
      line-height: 1.6;
      text-indent: 2em;
    }
    .chat-section {
      width: 70%;
      display: flex;
      flex-direction: column;
    }
    .chat-container {
      flex: 1;
      padding: 10px;
      overflow-y: auto;
    }
    .message {
      display: flex;
      margin-bottom: 10px;
      align-items: flex-end;
    }
    .message.ai {
      justify-content: flex-start;
    }
    .message.user {
      justify-content: flex-end;
    }
    .bubble {
      max-width: 70%;
      padding: 10px 15px;
      border-radius: 20px;
      position: relative;
      background-color: #e0f7fa;
      color: #333333;
      font-size: 16px;
      line-height: 1.4;
      display: inline-block;
    }
    .message.ai .bubble {
      background-color: #e0f7fa;
    }
    .message.user .bubble {
      background-color: #d3d3d3;
    }
    .bubble::after {
      content: '';
      position: absolute;
      bottom: 0;
      width: 0;
      height: 0;
    }
    .message.ai .bubble::after {
      left: -10px;
      border-left: 10px solid transparent;
      border-right: 10px solid #e0f7fa;
      border-top: 10px solid #e0f7fa;
      border-bottom: 10px solid transparent;
    }
    .message.user .bubble::after {
      right: -10px;
      border-left: 10px solid #d3d3d3;
      border-right: 10px solid transparent;
      border-top: 10px solid #d3d3d3;
      border-bottom: 10px solid transparent;
    }
    #options-container {
      padding: 10px;
      text-align: center;
    }
    .option-btn {
      background-color: #2e8b57;
      color: #ffffff;
      border: none;
      border-radius: 20px;
      padding: 10px 20px;
      cursor: pointer;
      transition: background-color 0.3s ease;
      text-align: center;
      margin: 10px;
    }
    .option-btn:hover {
      background-color: #3cb371;
    }
    .stage-title {
      text-align: center;
      font-size: 20px;
      color: #2e8b57;
      margin: 20px 0;
      font-weight: bold; /* åŠ ç²— */
    }
    .ai-avatar {
      width: 50px; /* è°ƒæ•´å®½åº¦ */
      height: 50px; /* è°ƒæ•´é«˜åº¦ */
      border-radius: 50%;
      margin-right: 10px;
    }
    .thinking {
      display: flex;
      align-items: center;
    }
    .dots {
      display: inline-block;
      margin-left: 5px;
    }
    .dot {
      display: inline-block;
      width: 8px;
      height: 8px;
      background-color: #888;
      border-radius: 50%;
      margin: 0 2px;
      opacity: 0;
      animation: blink 1s infinite;
    }
    .dot:nth-child(1) {
      animation-delay: 0s;
    }
    .dot:nth-child(2) {
      animation-delay: 0.2s;
    }
    .dot:nth-child(3) {
      animation-delay: 0.4s;
    }
    @keyframes blink {
      0% { opacity: 0; }
      50% { opacity: 1; }
      100% { opacity: 0; }
    }
    /* å¼¹çª—æ ·å¼ */
    .modal {
      display: none;
      position: fixed;
      z-index: 1;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      background-color: rgba(0,0,0,0.5);
    }
    .modal-content {
      background-color: #fff;
      margin: 15% auto;
      padding: 30px;
      border: 1px solid #888;
      width: 50%;
      max-width: 500px;
      text-align: center;
      border-radius: 10px;
      position: relative;
    }
    .modal-content h2 {
      margin-top: 0;
    }
    #final-message {
      color: red;
      font-weight: bold;
    }
    #close-modal-btn {
      margin-top: 20px;
      padding: 10px 20px;
      background-color: #2e8b57;
      color: #ffffff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    #close-modal-btn:hover {
      background-color: #3cb371;
    }
  </style>
</head>
<body>
  <!-- å‰ç½®é¡µé¢ -->
  <div id="pre-page">
    <h1>æ¬¢è¿ä½¿ç”¨å…±æƒ…èƒ½åŠ›è®­ç»ƒ</h1>
    <button id="start-btn">å¼€å§‹äº¤äº’</button>
  </div>

  <!-- èŠå¤©ç•Œé¢ -->
  <div id="chat-interface">
    <!-- æ ‡é¢˜ -->
    <div class="header">
      <h1>AIå…±æƒ…èƒ½åŠ›æå‡åŠ©æ‰‹</h1>
    </div>
    <!-- å†…å®¹åŒºåŸŸ -->
    <div class="content">
      <!-- å½“äº‹äººæƒ…å†µ -->
      <div class="client-info">
        <h2>å½“äº‹äººæƒ…å†µ</h2>
        <p>æˆ‘ç‰¹åˆ«å–œæ¬¢ç”¨ç‹‚åƒçš„æ–¹å¼å®‰æ…°è‡ªå·±ã€‚å°¤å…¶ä¸Šäº†åœ¨å¤§å­¦ï¼Œæ„Ÿè§‰æ¥è‡ªå››é¢å…«æ–¹çš„å‹åŠ›ï¼Œç”šè‡³æ¯”é«˜ä¸­çš„å‹åŠ›è¿˜å¤§ï¼Œä¸ä»…æœ‰å­¦ä¹ ä¸Šçš„äº‹å„¿ã€è¿˜è¦è·Ÿäººæ‰“äº¤é“ã€‚å‚åŠ å„ç§ç¤¾å›¢ã€å­¦ç”Ÿä¼šç­‰ç»„ç»‡ï¼Œæ„Ÿè§‰è¿˜è¦è¢«è¿«åˆç¾¤ã€‚è¿™äº›éƒ½è®©æˆ‘è¶Šæ¥è¶Šç„¦è™‘ï¼Œæˆ‘ä¸€ç„¦è™‘ã€å­¤å•æˆ–è€…éš¾è¿‡ï¼Œå°±ä¼šä¹°å¥½å¤šé«˜çƒ­é‡ã€é«˜ç¢³æ°´ä¸€ç±»çš„é£Ÿç‰©ï¼Œç„¶åçœ‹ç€ä¸€äº›ä¸‹é¥­å‰§ï¼Œè¾¹åƒè¾¹çœ‹ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘å°±è§‰å¾—è‡ªå·±å¾ˆå¿«ä¹ã€‚ä½†æ˜¯æˆ‘çš„ç†æ™ºå‘Šè¯‰æˆ‘ï¼Œè¿™äº›ä¸å¥åº·ï¼Œå¯¹èº«ä½“ä¹Ÿä¸å¥½ï¼Œè¿™æ˜¯ä¸ªåä¹ æƒ¯ï¼Œæˆ‘åº”è¯¥è‡ªå¾‹ã€åº”è¯¥æ‘’å¼ƒã€‚å¯æˆ‘å°±æ˜¯ç®¡ä¸ä½è‡ªå·±ã€‚æˆ‘ä¹Ÿè¯•è¿‡è¿åŠ¨å•Šï¼Œè·Ÿæœ‹å‹å” å—‘å•¥çš„ï¼Œéƒ½æ˜¯æš‚æ—¶æœ‰ç”¨ï¼Œåé¢åˆä¼šæ¥ç€åƒï¼Œæˆ‘æœ€è¿‘å› ä¸ºè¿™ä¸ªäº‹æƒ…æŒºæ„çš„ï¼Œä¸çŸ¥é“è¯¥æ€ä¹ˆåŠäº†ã€‚</p>
      </div>
      <!-- èŠå¤©åŒºåŸŸ -->
      <div class="chat-section">
        <div class="chat-container" id="chat-container">
          <!-- èŠå¤©è®°å½•å°†é€šè¿‡JavaScriptåŠ¨æ€æ·»åŠ  -->
        </div>
        <!-- é€‰é¡¹æŒ‰é’® -->
        <div id="options-container">
          <!-- é€‰é¡¹æŒ‰é’®å°†é€šè¿‡JavaScriptåŠ¨æ€æ·»åŠ  -->
        </div>
      </div>
    </div>
  </div>

  <!-- å¼¹çª— -->
  <div id="modal" class="modal">
    <div class="modal-content" id="modal-content">
      <h2>æœ¬æ¬¡äº¤äº’å·²ç»“æŸ</h2>
      <p id="final-message"></p>
      <button id="close-modal-btn">å…³é—­</button>
    </div>
  </div>

  <script>
    const conversations = [
      { role: 'ai', text: 'æ‚¨å¥½ï¼Œæˆ‘æ˜¯æ‚¨çš„AIå…±æƒ…èƒ½åŠ›æå‡åŠ©æ‰‹ã€‚' },
      { role: 'ai', text: 'åœ¨æœ¬æ¬¡äº’åŠ¨ä¸­ï¼Œæˆ‘å°†å¸®åŠ©æ‚¨æå‡æ‚¨çš„å…±æƒ…èƒ½åŠ›ã€‚' },
      { role: 'stage', text: 'â­ é˜¶æ®µä¸€ï¼šæƒ…ç»ªè¯†åˆ«ä¸åæ˜  ğŸ˜Š' },
      { role: 'user', options: ['ç„¦è™‘ã€å­¤å•ã€éš¾è¿‡ã€‚'] },
      { role: 'ai', text: 'è¿™äº›æƒ…ç»ªå‡ºç°çš„é¢‘ç‡é«˜å—ï¼Ÿ' },
      { role: 'user', options: ['å¾ˆé¢‘ç¹ã€‚'] },
      { role: 'ai', text: 'äº†è§£äº†ï¼Œé‚£ä¹ˆè¿™äº›æƒ…ç»ªæ˜¯å¦‚ä½•å½±å“æ‚¨çš„æ—¥å¸¸ç”Ÿæ´»çš„å‘¢ï¼Ÿ' },
      { role: 'stage', text: 'ğŸŒŸ é˜¶æ®µäºŒï¼šæ¢ç´¢æƒ…ç»ªèƒŒåçš„åŸå›  ğŸ¤”' },
      { role: 'ai', text: 'æ‚¨èƒ½è¯¦ç»†æè¿°ä¸€ä¸‹è¿™äº›æƒ…ç»ªèƒŒåçš„åŸå› å—ï¼Ÿ' },
      { role: 'user', options: ['æˆ‘è§‰å¾—æ˜¯å› ä¸ºå¤–ç•Œçš„å‹åŠ›ã€‚'] },
      { role: 'ai', text: 'åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œæ‚¨é€šå¸¸ä¼šæ€ä¹ˆåšæ¥åº”å¯¹è¿™äº›æƒ…ç»ªï¼Ÿ' },
      { role: 'user', options: ['æˆ‘ä¼šæš´é¥®æš´é£Ÿã€‚'] },
      { role: 'ai', text: 'è¿™ç¡®å®æ˜¯ä¸€ä¸ªå¸¸è§çš„åº”å¯¹æœºåˆ¶ã€‚' },
      { role: 'stage', text: 'âœ¨ é˜¶æ®µä¸‰ï¼šå½¢è±¡åœ°è¡¨è¾¾å…±æƒ… ğŸ¤—' },
      { role: 'ai', text: 'æ‚¨å¯ä»¥æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœæ‚¨çš„æœ‹å‹ä¹Ÿæœ‰ç±»ä¼¼çš„æƒ…å†µï¼Œæ‚¨ä¼šæ€ä¹ˆè¡¨è¾¾å¯¹ä»–ä»¬çš„ç†è§£å’Œæ”¯æŒå‘¢ï¼Ÿ' },
      { role: 'user', options: ['æˆ‘ä¼šå‘Šè¯‰ä»–ä»¬æˆ‘ç†è§£ä»–ä»¬çš„æ„Ÿå—ã€‚'] },
      { role: 'ai', text: 'å¤ªæ£’äº†ï¼Œè¿™æ˜¯ä¸€ç§å¾ˆå¥½çš„è¡¨è¾¾æ–¹å¼ã€‚' },
      { role: 'user', options: ['æ˜ç™½ã€‚'] },
      { role: 'ai', text: 'æœ¬æ¬¡å¯¹è¯å·²ç»“æŸï¼Œè¯·æŒ‰ç…§æŒ‡ç¤ºè¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œã€‚' }
    ];

    let currentIndex = 0;
    const prePage = document.getElementById('pre-page');
    const startBtn = document.getElementById('start-btn');
    const chatInterface = document.getElementById('chat-interface');
    const chatContainer = document.getElementById('chat-container');
    const optionsContainer = document.getElementById('options-container');
    const modal = document.getElementById('modal');
    const finalMessage = document.getElementById('final-message');

    startBtn.addEventListener('click', () => {
      prePage.style.display = 'none';
      chatInterface.style.display = 'flex';
      startConversation();
    });

    function simulateThinking(callback) {
      const thinkingMessage = document.createElement('div');
      thinkingMessage.className = 'message ai thinking';
      const avatar = document.createElement('img');
      avatar.src = 'https://github.com/vijay320111/chat2/raw/main/tongbei.png';
      avatar.className = 'ai-avatar';
      thinkingMessage.appendChild(avatar);

      const dotsContainer = document.createElement('div');
      dotsContainer.className = 'dots';
      for(let i=0; i<3; i++) {
        const dot = document.createElement('span');
        dot.className = 'dot';
        dotsContainer.appendChild(dot);
      }
      thinkingMessage.appendChild(dotsContainer);
      chatContainer.appendChild(thinkingMessage);
      chatContainer.scrollTop = chatContainer.scrollHeight;

      // æ¨¡æ‹Ÿæ€è€ƒè¿‡ç¨‹
      setTimeout(() => {
        chatContainer.removeChild(thinkingMessage);
        callback();
      }, 2000);
    }

    function displayMessage(role, text) {
      const messageEl = document.createElement('div');
      messageEl.className = `message ${role}`;
      if (role === 'ai') {
        const avatar = document.createElement('img');
        avatar.src = 'https://github.com/vijay320111/chat2/raw/main/tongbei.png';
        avatar.className = 'ai-avatar';
        messageEl.appendChild(avatar);
        const bubbleEl = document.createElement('div');
        bubbleEl.className = 'bubble';
        messageEl.appendChild(bubbleEl);

        let index = 0;
        function typeCharacter() {
          bubbleEl.textContent += text.charAt(index);
          index++;
          if (index < text.length) {
            setTimeout(typeCharacter, 50);
          } else {
            chatContainer.scrollTop = chatContainer.scrollHeight;
            moveToNext();
          }
        }
        typeCharacter();
      } else {
        const bubbleEl = document.createElement('div');
        bubbleEl.className = 'bubble';
        bubbleEl.textContent = text;
        messageEl.appendChild(bubbleEl);
        chatContainer.appendChild(messageEl);
        chatContainer.scrollTop = chatContainer.scrollHeight;
        // ç”¨æˆ·æ¶ˆæ¯å‘é€åï¼Œç­‰å¾…ç‰‡åˆ»å†è¿›å…¥ä¸‹ä¸€æ­¥
        setTimeout(() => {
          moveToNext();
        }, 500);
      }
      chatContainer.appendChild(messageEl);
      // ç¡®ä¿èŠå¤©å®¹å™¨æ»šåŠ¨åˆ°åº•éƒ¨
      setTimeout(() => {
        chatContainer.scrollTop = chatContainer.scrollHeight;
        optionsContainer.scrollIntoView({ behavior: 'smooth', block: 'end' });
      }, 0);
    }

    function displayStageTitle(text) {
      const stageTitle = document.createElement('div');
      stageTitle.className = 'stage-title';
      stageTitle.textContent = text;
      chatContainer.appendChild(stageTitle);
      chatContainer.scrollTop = chatContainer.scrollHeight;
      moveToNext();
    }

    function displayUserOption(options) {
      optionsContainer.innerHTML = '';
      const optionBtn = document.createElement('button');
      optionBtn.className = 'option-btn';
      optionBtn.textContent = options[0];
      optionsContainer.appendChild(optionBtn);

      optionBtn.addEventListener('click', () => {
        displayMessage('user', options[0]);
        optionsContainer.innerHTML = '';
      });
    }

    function moveToNext() {
      currentIndex++;
      if (currentIndex < conversations.length) {
        const item = conversations[currentIndex];
        if (item.role === 'ai') {
          simulateThinking(() => {
            displayMessage('ai', item.text);
          });
        } else if (item.role === 'user') {
          displayUserOption(item.options);
          // ç¡®ä¿é€‰é¡¹æŒ‰é’®åœ¨è§†é‡å†…
          optionsContainer.scrollIntoView({ behavior: 'smooth', block: 'end' });
        } else if (item.role === 'stage') {
          displayStageTitle(item.text);
        }
      } else {
        optionsContainer.innerHTML = '';
        showModal(); // æ˜¾ç¤ºå¼¹çª—
      }
    }

    // å¼€å§‹å¯¹è¯
    function startConversation() {
      const item = conversations[currentIndex];
      if (item.role === 'ai') {
        simulateThinking(() => {
          displayMessage('ai', item.text);
        });
      } else if (item.role === 'stage') {
        displayStageTitle(item.text);
      } else if (item.role === 'user') {
        displayUserOption(item.options);
      }
    }

    // æ˜¾ç¤ºå¼¹çª—
    function showModal() {
      // è·å–AIæœ€åä¸€å¥è¯
      const lastAIMessage = conversations[conversations.length - 1].text;
      finalMessage.textContent = lastAIMessage;

      modal.style.display = 'block';
    }

    // æ·»åŠ å…³é—­å¼¹çª—çš„äº‹ä»¶
    document.getElementById('close-modal-btn').addEventListener('click', function() {
      modal.style.display = 'none';
    });
  </script>
</body>
</html>
